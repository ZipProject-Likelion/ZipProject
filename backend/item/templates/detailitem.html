{% extends 'base.html' %}
{% block content %}
{% load static %}

    <title>아이템 상세 페이지</title>
    <link rel="stylesheet" href="{% static 'css/newitem.css' %}">
    <link rel="stylesheet" href="{% static 'css/detailitem.css' %}">

    <div class="container">
        <div class="form-container">
            <!-- 상품 정보 -->
            <h1>{{item.name}}</h1>
            <a href="{% url 'mypage' username=item.user %}">{{item.user}}</a>
            <br>
            {% if item.image %}
            <img src="{{item.image.url}}" height=400><br>
            {% endif %}
            <p>Price : {{item.price}}원</p>
            <p>Shop : <a href="{{item.shop}}">{{item.shop}}</a></p>
            <p>Type : {{item.type}}</p>
            <a href={% url 'homeitem' %}>홈으로</a>

            <!-- 글 작성자=이용자면 수정/삭제 띄우기 -->
            {% if item.user|stringformat:"s" == user.username|stringformat:"s" %}
            <a href={% url 'edititem' index=item.pk %}>&nbsp수정하기</a>
            <a href={% url 'deleteitem' pk=item.pk %}>&nbsp삭제하기</a>
            {% endif %}
            <br><br>

            <!-- 좋아요 -->
            <a href="">
                {% if user in item.like_users.all %}
                좋아요취소
                <!-- <i class="fas fa-heart"></i> -->
                {% else %}
                좋아요
                <!-- <i class="far fa-heart"></i> -->
                {% endif %}
            </a>
            <br><a href="#">컬렉션에 추가하기</a>

            <!-- 댓글 -->
            <br><br>
            <hr><br>
            <form method="POST">
                {% csrf_token %}
                <input type="text" name="text">
                <button type="submit" class="comment-btn">댓글 달기</button>
            </form>
            {% for comment in comment_list %}
            <h5>{{ comment.user }}</h5>
            <h5>{{comment.created_date }}</h5>
            <p>{{ comment.text|linebreaks}}</p>
            <a href="{%url 'delete_comment' index=item.pk comment_pk=comment.pk %}">댓글 삭제</a>
            {% endfor %}
        </div>
    </div>
    
{% endblock %}